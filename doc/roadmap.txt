Browser Search + Docs Reader MCP Server (Rust + Brave + SQLite)        *mcp-web*
================================================================================
K. Milestones                                                                *K*
================================================================================

K1. Milestone 1: MCP stdio server (no network)
--------------------------------------------------------------------------------
- [x] rmcp server boots on stdio (tools registered via #[tool])
- [x] Implement web_extract via Lectito (Document::parse + extract_content)
      (Use git url: https://github.com/stormlightlabs/lectito)

K2. Milestone 2: SQLite cache + migrations
--------------------------------------------------------------------------------
- [x] Implement cache mod with tokio_rustqlite
- [x] Add migrations for snapshots/search_cache (C2)
- [x] Enable WAL + pragmas (C3)
- [x] cache_get + cache_purge tools

K3. Milestone 3: HTTP fetch pipeline (safe) + readable mode
--------------------------------------------------------------------------------
- [x] Implement SSRF checks + redirect limits + max_bytes (E2)
- [x] Implement robots.txt fetch + decision cache (E3)
- [x] Implement web_open(readable):
      fetch HTML -> Lectito extract -> markdown normalize -> cache

K4. Milestone 4: Brave web_search tool
--------------------------------------------------------------------------------
- [x] Implement brave-client:
      - headers/auth
      - q/count/offset/freshness/safesearch/country/lang/extra_snippets
- [x] Normalize results + return more_results_available where possible
- [x] Add short TTL search_cache table usage
Refs: Brave web search docs for pagination, safesearch, freshness, snippets.

K5. Milestone 5: Site-config pipeline
--------------------------------------------------------------------------------
- [ ] Add ./site_configs/ domain mapping
- [ ] Add cache metadata for siteconfig + extractor version
- [ ] Add a "debug: explain_extraction" output to help tuning
      (e.g., which candidate won, how many siblings included, etc.)
- [ ] web_batch_open with bounded concurrency
- [ ] Add "domain_allowlist" post-filter for search results (A2)
- [ ] Add stable markdown header + link harvest (F4)

K6. Milestone 6: Rendered mode (optional feature)
--------------------------------------------------------------------------------
- [ ] Add render crate (rust-headless-chrome or chromiumoxide)
- [ ] Render HTML via headless browser -> feed HTML to Lectito
- [ ] This keeps *one* extraction engine across raw vs rendered flows.
Refs: headless Chrome control options.

K7. Milestone 7: Hardening + observability
--------------------------------------------------------------------------------
- [ ] JSONL logs + metrics counters (H4)
- [ ] Fuzz-ish tests for URL parsing inputs
- [ ] Cache purge policy (C4) + size ceiling
- [ ] Add documentation: SECURITY.md + threat model

K8. Milestone 8: Packaging + integration with your agent harness
--------------------------------------------------------------------------------
- [ ] Provide a single binary release
